



## Is RMSE enough? {auto-animate=true}


::: {style="display: flex; flex-direction: column; align-items: center; justify-content: center;"}

<div style="display: flex; align-items: flex-start; justify-content: center; gap: 10px;">

<div style="text-align: center;">
![](./images/gen1_surface.png){width="100%" style="background-color: white; padding: 2px;"}
<p style="font-size: 0.7em; margin-top: 5px;">Unconstrained</p>
</div>

<div style="text-align: center;">
![](./images/gen4_surface.png){width="100%" style="background-color: white; padding: 2px;"}
<p style="font-size: 0.7em; margin-top: 5px;"><span style="color: #2ecc71;">{{< fa square-check >}}</span> Constrained</p>
</div>

<div style="text-align: center;">
![](./images/reference_surface.png){width="100%" style="background-color: white; padding: 2px;"}
<p style="font-size: 0.7em; margin-top: 5px;">Reference</p>
</div>

</div>

![](./images/colorbar_density.png){width="50%" style="padding: 5px; margin-top: 5px;"}

:::

::: {.absolute style="bottom: 10%; right: 5%; font-size: 0.6em;"}

|       | *Unconstrained* | *Constrained* | Reference |
|-------|:-------------:|:-----------:|:---------:|
| $T$ DW  |      2.9      |     **2.6**     |    2.6    |
| $\rho$ error  |      26.8     |     **0.4**     |    0.4    |

:::


::: {.absolute style="font-size: 0.6em; bottom: 3%; left: 20%; transform: translateX(-40%);"}
Evaluate even when resolution changes.
:::

::: {.attribution}
@meunier2025, @gorce2025
:::

::: {.notes}
- These are results from a diffusion model to sample from a equilibrated distribution. The justification is that there may not be just one valid spinup state. 
- I'm not going to describe the work -  you can find it by following the link. 
- Suffice it to say that in this case better diffusion outputs may lead to higher RMSE. This is because
- critically only one leads to a successful restart of NEMO even though the RMSE is relatively close in each case.
- the middle figure captures the high energy modes such as eddies
- it also caputres the stratification that is essential for nemo to run without a physical shock
:::

## Is RMSE enough? {auto-animate=true}


::: {style="display: flex; flex-direction: column; align-items: center; justify-content: center;"}

<div style="display: flex; align-items: flex-start; justify-content: center; gap: 10px;">

<div style="text-align: center;">
![](./images/gen1_vertical.png){width="50%" style="background-color: white; padding: 2px;"}
<p style="font-size: 0.7em; margin-top: 5px;">Unconstrained</p>
</div>

<div style="text-align: center;">
![](./images/gen4_vertical.png){width="50%" style="background-color: white; padding: 2px;"}
<p style="font-size: 0.7em; margin-top: 5px;"><span style="color: #2ecc71;">{{< fa square-check >}}</span> Constrained</p>
</div>

<div style="text-align: center;">
![](./images/reference_vertical.png){width="50%" style="background-color: white; padding: 2px;"}
<p style="font-size: 0.7em; margin-top: 5px;">Reference</p>
</div>

</div>

::: {.absolute style="bottom: 10%; right: 5%; font-size: 0.6em;"}

|       | *Unconstrained* | *Constrained* | Reference |
|-------|:-------------:|:-----------:|:---------:|
| $T$ DW  |      2.9      |     **2.6**     |    2.6    |
| $\rho$ error  |      26.8     |     **0.4**     |    0.4    |

:::
![](./images/colorbar_density.png){width="50%" style="padding: 5px; margin-top: 5px;"}

:::


::: {.absolute style="font-size: 0.6em; bottom: 3%; left: 20%; transform: translateX(-40%);"}
Evaluate even when resolution changes.
:::
::: {.attribution}
@meunier2025, @gorce2025
:::

<style>
  .flow-container { position: relative; height: 450px; margin: 20px; }
  .line { position: absolute; left: 0; right: 0; height: 1px; background: linear-gradient(to right, transparent, #555, transparent); opacity: 0.6; }
  
  .box-row { position: absolute; display: flex; align-items: center; gap: 15px; width: 100%; }
  .box { color: white; padding: 15px 30px; border-radius: 8px; text-align: center; font-size: 0.85em; font-weight: bold; min-width: 180px; }
  .label { font-size: 0.6em; color: #ccc; max-width: 350px; }
</style>

## Evaluation-Benchmark

::: {.flow-container}

::: {.line style="top: 35%;"}
:::
::: {.line style="top: 75%;"}
:::

<!-- QR code in top left -->
::: {.fragment data-fragment-index="0" style="position: absolute; top: 1%; right: 1%; z-index: 10; font-size: 0.5em; text-align: center; width: 150px;"}
{{< qrcode https://github.com/m2lines/nemo-spinup-forecast qr_width=100 >}}

[{{< fa brands github >}}/m2lines/nemo-spinup-forecast](https://github.com/m2lines/nemo-spinup-forecast)
:::

<!-- Curved arrow along left side -->
<svg class="fragment" data-fragment-index="3" style="position: absolute; left: -10%; top: 10%; width: 150px; height: 80%; z-index: 0;" viewBox="0 0 150 500">
  <path d="M 120 0 Q 20 225, 120 450" stroke="#e74c3c" stroke-width="3" fill="none" marker-end="url(#arrowhead-left)" opacity="0.7"/>
  <defs>
    <marker id="arrowhead-left" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c" />
    </marker>
  </defs>
</svg>

<svg class="fragment" data-fragment-index="2" style="position: absolute; right: 20%; top: 10%; width: 150px; height: 80%; z-index: 0;" viewBox="0 0 150 500">
  <path d="M 30 0 Q 130 250, 30 500" stroke="#e74c3c" stroke-width="3" fill="none" marker-end="url(#arrowhead-right)" opacity="0.7"/>
  <defs>
    <marker id="arrowhead-right" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c" />
    </marker>
  </defs>
</svg>





::: {.box-row .fragment data-fragment-index="0" style="top: 0; right: 17%; justify-content: flex-end;"}
::: {.label style="text-align: left;"}
 AI emulator or traditional time integrator of physical quantities.
:::
::: {.box style="background-color: #2ecc71;"}
AI Emulator <br> Hybrid
:::
:::

::: {.box-row .fragment data-fragment-index="0" style="top: 0; left: -5%;"}
::: {.label style="text-align: left;"}
:::
::: {.box style="background-color: #2ecc71;"}
Ocean <br> Model
:::
:::

<!-- NEMO logo to the left of Ocean Model box -->
![](./images/logos/NEMO_logo.png){.fragment data-fragment-index="0" style="position: absolute; top: 20%; left: 15%; width: 80px; background-color: white; padding: 3px; z-index: 10;"}

<svg class="fragment" data-fragment-index="1" style="position: absolute; top: 70px; left: 50px; width: 40px; height: 330px; z-index: 1;" viewBox="0 0 40 300">
  <path d="M 20 80 L 20 240" stroke="#888" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#888" />
    </marker>
  </defs>
</svg>


::: {.box-row .fragment data-fragment-index="1" style="bottom: -40px; left: -5%; justify-content: flex-start;"}
::: {.box style="background-color: #3498db;"}
Physical Evaluation
:::
::: {.label style="text-align: left;"}
- Physical evaluation of instantaneous and temporal fields [`GridT`, `restart`].nc
:::
:::

::: {.box-row .fragment data-fragment-index="2" style="top: 55%; left: 14%; transform: translateY(-50%);"}
::: {.box style="background-color: #e74c3c;"}
Translator<br> Toolbox
:::
::: {.label}
- Create `restart` state from AI emulator<br>
- `Convert` states between different models. Might be important for structural uncertainty. 
:::
:::

:::


## Physical evaluation {transition="fade" .smaller}
### Metrics
:::: {.columns style="align-items: flex-start;"}

::: {.column width="70%"}
![](./images/metrics.png){width="90%" style="background-color: white; padding: 5px;"}

<p style="font-size: 0.5em; text-align: center;">
Figure from *Learning to generate physical ocean states. @meunier2025*
</p>
:::

::: {.column width="30%"}
<div style="margin-top: 100px;">
- Metrics relevant for measuring equilibrium progress.
  - *No ground truth*.
- Framework to easily add **new metrics**. 
</div>
:::

::::

## Developer highlights {auto-animate=true}

### Spinup-benchmark 

:::: {.columns style="gap: 5%;"}

::: {.column style="width:55%;"}

::: {style="font-size: 0.65em;"}
- Execution modes:
  - Evaluate ocean emulators at `end` time only. 
  - Evaluate ocean emulators during `roll-out` over experiment duration. 
  - Evaluate numerical model result given emulated state. i.e. 'hybrid' approach. 
  - Use as part of AI emulation optimisation procedure (e.g. `loss` function). 
:::

:::

::: {.column style="width:40%; font-size: 65%; padding-left: 30px;"}
[{{< fa brands github >}}/m2lines/spinup-evaluation](https://github.com/m2lines/nemo-spinup-evaluation)

{{< qrcode https://github.com/m2lines/spinup-evaluation width=100 height=100 >}}

version `0.2.1`
:::

::::




## Developer highlights {auto-animate=true .smaller}

### Spinup-evaluation (1)
- {{< fa chart-line >}} Computes metrics on instantaneous (`restart`) and time history (`grid`) output files 
  - compute comparisons if reference provided
- {{< fa diagram-project >}} Strict mapping of ocean variables to restart and output variable names

:::: {.columns style="gap: 5%;"}
::: {.column style="width:65%;"}
<div style="display: grid; grid-template-columns: 120px 40px 180px 40px 140px; align-items: center; justify-content: center; margin-top: 25px; font-size: 0.6em; row-gap: 5px;">
  <div data-id="ref-box" style="background-color: #9b59b6; padding: 8px 12px; border-radius: 5px; text-align: center; grid-column: 3; grid-row: 1;">reference files</div>
  <div data-id="ref-arrow" style="color: #fff; font-size: 2em; text-align: center; grid-column: 3; grid-row: 2; margin-bottom: -20px;">↓</div>
  <div data-id="restart-box" style="background-color: #2ecc71; padding: 8px 12px; border-radius: 5px; text-align: center; grid-column: 1; grid-row: 3;">restart.nc</div>
  <div data-id="restart-arrow" style="color: #ffff; font-size: 2em; text-align: center; grid-column: 2; grid-row: 3;transform: rotate(45deg);">→</div>
  <div data-id="eval-box" style="background-color: #3498db; padding: 12px 20px; border-radius: 5px; text-align: center; font-weight: bold; grid-column: 3; grid-row: 3 / 6 ; align-self: center; margin-top: -35px;">Spinup<br/>Evaluation</div>
  <div data-id="eval-arrow" style="color: #ffff; font-size: 2em; text-align: center; grid-column: 4; grid-row: 3 / 6 ; align-self: center;">→</div>
  <div data-id="metrics-box" style="background-color: #b7beba; padding: 12px 15px; border-radius: 5px; text-align: center; grid-column: 5; grid-row: 3 / 6; align-self: center;">metrics.csv</div>
  <div data-id="output-box" style="background-color: #2ecc71; padding: 8px 12px; border-radius: 5px; text-align: center; grid-column: 1; grid-row: 4;">output.nc</div>
  <div data-id="output-arrow" style="color: #ffff; font-size: 2em; text-align: center; grid-column: 2; grid-row: 4;">→</div>
  <div data-id="mesh-box" style="background-color: #2ecc71; padding: 8px 12px; border-radius: 5px; text-align: center; grid-column: 1; grid-row: 5;">mesh.nc</div>
  <div data-id="mesh-arrow" style="color: #ffff; font-size: 2em; text-align: center; grid-column: 2; grid-row: 5;">→</div>
</div>
:::
::: {.column style="width:25%; font-size: 0.5em; padding-left: 20px;"}
[{{< fa brands github >}}/m2lines/spinup-evaluation](https://github.com/m2lines/nemo-spinup-evaluation)

{{< qrcode https://github.com/m2lines/spinup-evaluation width=100 height=100 >}}

version `0.2.1`
:::
::::

## Developer highlights {auto-animate=true}
### Restart/translator (2) {.smaller}

::: {style="font-size: 0.65em;"}
- Take an emulator state and convert to NEMO compatible `restart.nc` file
- *Regrid*, *upscale*, *downscale* resolution;
- Encode other physical assumptions (geostrophic velocities)
<!-- - $$NEMO \rightleftharpoons Oceananigans \rightleftharpoons OM4$$  (in progress...) -->
:::


<div style="display: grid; grid-template-columns: 120px 40px 180px 40px 180px 40px 140px; align-items: center; justify-content: center; margin-top: 10px; font-size: 0.6em; row-gap: 2px;">
  <div data-id="ref-box" style="background-color: #9b59b6; padding: 8px 12px; border-radius: 5px; text-align: center; grid-column: 3; grid-row: 2;">reference files</div>
  <div data-id="ref-arrow" style="color: #fff; font-size: 2em; text-align: center; grid-column: 3; grid-row: 3; line-height: 0.5;">↓</div>
  <div data-id="restart-box" style="background-color: #2ecc71; padding: 8px 12px; border-radius: 5px; text-align: center; grid-column: 1; grid-row: 3;">restart.nc</div>
  <div data-id="restart-arrow" style="color: #ffff; font-size: 2em; text-align: center; grid-column: 2; grid-row: 3; transform: rotate(45deg);">→</div>
  <div data-id="restart-proc-box" style="background-color: #e74c3c; padding: 12px 20px; border-radius: 5px; text-align: center; font-weight: bold; grid-column: 3; grid-row: 3 / 7; align-self: center;">Spinup<br/>Translator</div>
  <div data-id="restart-proc-arrow" style="color: #ffff; font-size: 2em; text-align: center; grid-column: 4; grid-row: 3 / 7; align-self: center;">→</div>
  <div data-id="eval-box" style="background-color: #3498db; padding: 12px 20px; border-radius: 5px; text-align: center; font-weight: bold; grid-column: 5; grid-row: 3 / 7; align-self: center;">Spinup<br/>Evaluation</div>
  <div data-id="eval-arrow" style="color: #ffff; font-size: 2em; text-align: center; grid-column: 6; grid-row: 3 / 7; align-self: center;">→</div>
  <div data-id="metrics-box" style="background-color: #b7beba; padding: 12px 15px; border-radius: 5px; text-align: center; grid-column: 7; grid-row: 3 / 7; align-self: center;">metrics.csv</div>
  <div data-id="output-box" style="background-color: #2ecc71; padding: 8px 12px; border-radius: 5px; text-align: center; grid-column: 1; grid-row: 4;">output.nc</div>
  <div data-id="output-arrow" style="color: #ffff; font-size: 2em; text-align: center; grid-column: 2; grid-row: 4;">→</div>
  <div data-id="mesh-box" style="background-color: #2ecc71; padding: 8px 12px; border-radius: 5px; text-align: center; grid-column: 1; grid-row: 5;">mesh.nc</div>
  <div data-id="mesh-arrow" style="color: #ffff; font-size: 2em; text-align: center; grid-column: 2; grid-row: 5;">→</div>
  <div data-id="raw-box" style="background-color: #f1c40f; padding: 8px 12px; border-radius: 5px; text-align: center; grid-column: 1; grid-row: 6;">raw.npy</div>
  <div data-id="raw-arrow" style="color: #ffff; font-size: 2em; text-align: center; grid-column: 2; grid-row: 6; transform: rotate(-45deg);">→</div>
</div>


  <!-- - to establish structural uncertainty between different ocean models.  -->


## Developer highlights
### Restart/translator (2) {.smaller}

::: {style="font-size: 0.65em;"}
- Take an emulator state and convert to NEMO compatible `restart.nc` file
- *Regrid*, *upscale*, *downscale* resolution;
- Encode other physical assumptions (geostrophic velocities)
- Translate between other ocean model restart files (in progress..) 
<!-- - $$NEMO \rightleftharpoons Oceananigans \rightleftharpoons OM4$$  (in progress...) -->

<div style="display: flex; flex-direction: row; align-items: center; justify-content: center; gap: 15px; margin-top: 50px;">
  
  <img src="./images/logos/NEMO_logo.png" style="height: 60px; filter: brightness(0) invert(1);" alt="NEMO">
  
  <span style="color: #2ecc71; font-size: 1.5em;">{{< fa arrow-right-arrow-left >}}</span>
  
  <img src="./images/logos/oceananigans.png" style="height: 60px;" alt="Oceananigans">
  
  <span style="color: #2ecc71; font-size: 1.5em;">{{< fa arrow-right-arrow-left >}}</span>
  
  <img src="./images/logos/MOM6.png" style="height: 60px;" alt="MOM6">

</div>
:::


  <!-- - to establish structural uncertainty between different ocean models.  -->




## Software engineering {.smaller}

::: {.columns}

::: {.column width="55%"}

::: {.fragment}
#### **Modular & Generalizable**
- Reusable components across domains
- Extensible to new models (e.g., NEMO, *Oceananigans*)
:::

::: {.fragment}
#### **Quality & Standards**
- Robust testing (Unit, Integration, Coverage) with CI and well documented end-to-end examples (hybrid)
- Data products adhere to **FAIR** [see @fair2016]
- **Collaborative Design**: Bridging Science & RSE

::: {.absolute style="top: 50%; left: 50%; background-color: None; padding: 10px; border-radius: 8px; display: flex; align-items: center; justify-content: center; width :100px; height: 80px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);"}
![](./images/logos/pytest.svg){height="140px"}
:::
:::
:::

::: {.column width="45%"}
<!-- ![](./images/rse-collaboration-diagram.png){fig-align="center"} -->

:::  {.fragment}
```{mermaid}
%%| fig-width: 4
graph TD
    A(Scientific Expertise) --- C{RSE Bridge}
    B(Software Engineering) --- C
    C --> D[Sustainable Tools]
    
    classDef default fill:#1a365d,stroke:#fff,stroke-width:2px,color:#fff,font-size:18px;
    classDef highlight fill:#84BD00,stroke:#fff,stroke-width:2px,color:#fff,font-size:18px;
    classDef bridge fill:#003E51,stroke:#fff,stroke-width:2px,color:#fff,font-size:18px;

    class A,B default;
    class C bridge;
    class D highlight;
    
    linkStyle default stroke:#fff,stroke-width:2px;
```

> Eliminating silos through cross-disciplinary partnership.
:::
:::

:::

::: {.notes}
- Eliminate siloed workflows through cross-disciplinary partnership.
- Explain how RSEs act as the bridge mentioned in the last bullet.
:::
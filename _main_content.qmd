## Is RMSE enough? {auto-animate=true}

::: {style="display: flex; flex-direction: column; align-items: center; justify-content: center;"}

<div style="display: flex; align-items: flex-start; justify-content: center; gap: 10px;">

<div style="text-align: center;">
![](./images/gen1_surface.png){width="100%" style="background-color: white; padding: 2px;"}
<p style="font-size: 0.7em; margin-top: 5px;">Unconstrained</p>
</div>

<div style="text-align: center;">
![](./images/gen4_surface.png){width="100%" style="background-color: white; padding: 2px;"}
<p style="font-size: 0.7em; margin-top: 5px;"><span style="color: #2ecc71;">{{< fa square-check >}}</span> Constrained</p>
</div>

<div style="text-align: center;">
![](./images/reference_surface.png){width="100%" style="background-color: white; padding: 2px;"}
<p style="font-size: 0.7em; margin-top: 5px;">Reference</p>
</div>

</div>

![](./images/colorbar_density.png){width="50%" style="padding: 5px; margin-top: 5px;"}

:::

::: {.absolute style="bottom: 10%; right: 5%; font-size: 0.6em;"}

|       | *Unconstrained* | *Constrained* | Reference |
|-------|:-------------:|:-----------:|:---------:|
| $T$ DW  |      2.9      |     **2.6**     |    2.6    |
| $\rho$ error  |      26.8     |     **0.4**     |    0.4    |

:::


::: {.absolute style="font-size: 0.6em; bottom: 3%; left: 20%; transform: translateX(-40%);"}
Evaluate even when resolution changes.
:::

::: {.attribution}
@meunier2025, @gorce2025
:::

::: {.notes}
- These are results from a diffusion model to sample from a equilibrated distribution. The justification is that there may not be just one valid spinup state. 
- I'm not going to describe the work -  you can find it by following the link. 
- Suffice it to say that in this case better diffusion outputs may lead to higher RMSE. This is because
- critically only one leads to a successful restart of NEMO even though the RMSE is relatively close in each case.
- the middle figure captures the high energy modes such as eddies
- it also caputres the stratification that is essential for nemo to run without a physical shock
:::

## Is RMSE enough? {auto-animate=true}


::: {style="display: flex; flex-direction: column; align-items: center; justify-content: center;"}

<div style="display: flex; align-items: flex-start; justify-content: center; gap: 10px;">

<div style="text-align: center;">
![](./images/gen1_vertical.png){width="50%" style="background-color: white; padding: 2px;"}
<p style="font-size: 0.7em; margin-top: 5px;">Unconstrained</p>
</div>

<div style="text-align: center;">
![](./images/gen4_vertical.png){width="50%" style="background-color: white; padding: 2px;"}
<p style="font-size: 0.7em; margin-top: 5px;"><span style="color: #2ecc71;">{{< fa square-check >}}</span> Constrained</p>
</div>

<div style="text-align: center;">
![](./images/reference_vertical.png){width="50%" style="background-color: white; padding: 2px;"}
<p style="font-size: 0.7em; margin-top: 5px;">Reference</p>
</div>

</div>

::: {.absolute style="bottom: 10%; right: 5%; font-size: 0.6em;"}

|       | *Unconstrained* | *Constrained* | Reference |
|-------|:-------------:|:-----------:|:---------:|
| $T$ DW  |      2.9      |     **2.6**     |    2.6    |
| $\rho$ error  |      26.8     |     **0.4**     |    0.4    |

:::
![](./images/colorbar_density.png){width="50%" style="padding: 5px; margin-top: 5px;"}

:::


::: {.absolute style="font-size: 0.6em; bottom: 3%; left: 20%; transform: translateX(-40%);"}
Evaluate even when resolution changes.
:::
::: {.attribution}
@meunier2025, @gorce2025
:::

<style>
  .flow-container { position: relative; height: 450px; margin: 20px; }
  .line { position: absolute; left: 0; right: 0; height: 1px; background: linear-gradient(to right, transparent, #555, transparent); opacity: 0.6; }
  
  .box-row { position: absolute; display: flex; align-items: center; gap: 15px; width: 100%; }
  .box { color: white; padding: 15px 30px; border-radius: 8px; text-align: center; font-size: 0.85em; font-weight: bold; min-width: 180px; }
  .label { font-size: 0.6em; color: #ccc; max-width: 350px; }
</style>

## Physical evaluation {transition="fade" .smaller}
### Metrics
:::: {.columns style="align-items: flex-start;"}

::: {.column width="70%"}
![](./images/metrics.png){width="90%" style="background-color: white; padding: 5px;"}

<p style="font-size: 0.5em; text-align: center;">
Figure from *Learning to generate physical ocean states. @meunier2025*
</p>
:::

::: {.column width="30%"}
<div style="margin-top: 100px;">
Metrics specific to tracking `equilibrium` progress.

  - *No ground truth*
</div>
:::

::::

:::{.notes}
- worth emphasizing that there is no ground truth - at best we can compare only against a pre-existing reference state. 
:::
## Evaluation-Benchmark

::: {.flow-container}

::: {.line style="top: 35%;"}
:::
::: {.line style="top: 75%;"}
:::

<!-- QR code in top left -->
::: {.fragment data-fragment-index="0" style="position: absolute; top: 1%; right: 1%; z-index: 10; font-size: 0.5em; text-align: center; width: 150px;"}
{{< qrcode https://github.com/m2lines/nemo-spinup-forecast qr_width=100 >}}

[{{< fa brands github >}}/m2lines/nemo-spinup-forecast](https://github.com/m2lines/nemo-spinup-forecast)
:::

<!-- Curved arrow along left side -->
<!-- <svg class="fragment" data-fragment-index="3" style="position: absolute; left: -10%; top: 10%; width: 150px; height: 80%; z-index: 0;" viewBox="0 0 150 500">
  <path d="M 120 0 Q 20 225, 120 450" stroke="#e74c3c" stroke-width="3" fill="none" marker-end="url(#arrowhead-left)" opacity="0.7"/>
  <defs>
    <marker id="arrowhead-left" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c" />
    </marker>
  </defs>
</svg> -->

<svg class="fragment" data-fragment-index="2" style="position: absolute; right: 20%; top: 10%; width: 150px; height: 80%; z-index: 0;" viewBox="0 0 150 500">
  <path d="M 30 0 Q 130 250, 30 500" stroke="#e74c3c" stroke-width="3" fill="none" marker-end="url(#arrowhead-right)" opacity="0.7"/>
  <defs>
    <marker id="arrowhead-right" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c" />
    </marker>
  </defs>
</svg>





::: {.box-row .fragment data-fragment-index="0" style="top: 0; right: 17%; justify-content: flex-end;"}
::: {.label style="text-align: left;"}
 AI emulator or traditional time integrator of physical quantities.
:::
::: {.box style="background-color: #2ecc71;"}
AI Emulator <br> / Hybrid
:::
:::

::: {.box-row .fragment data-fragment-index="0" style="top: 0; left: -5%;"}
::: {.label style="text-align: left;"}
:::
::: {.box style="background-color: #2ecc71;"}
Ocean <br> Model
:::
:::

<!-- NEMO logo to the left of Ocean Model box -->
![](./images/logos/NEMO_logo.png){.fragment data-fragment-index="0" style="position: absolute; top: 20%; left: 15%; width: 80px; background-color: white; padding: 3px; z-index: 10;"}

<svg class="fragment" data-fragment-index="1" style="position: absolute; top: 70px; left: 50px; width: 40px; height: 330px; z-index: 1;" viewBox="0 0 40 300">
  <path d="M 20 80 L 20 240" stroke="#888" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#888" />
    </marker>
  </defs>
</svg>


::: {.box-row .fragment data-fragment-index="1" style="bottom: -40px; left: -5%; justify-content: flex-start;"}
::: {.box style="background-color: #3498db;"}
Physical Evaluation
:::
::: {.label style="text-align: left;"}
- Physical evaluation of instantaneous and temporal fields [`GridT`, `restart`].nc
:::
:::

::: {.box-row .fragment data-fragment-index="2" style="top: 55%; left: 14%; transform: translateY(-50%);"}
::: {.box style="background-color: #e74c3c;"}
Translator<br> Toolbox
:::
::: {.label}
- Create `restart` state from AI emulator<br>
- Simple checks 
- Glue to future time-stepping
<!-- - `Convert` states between different models. Important for structural  -->
:::
:::

:::

::: {.notes}
- What does the evaluation-benchmark look like?
- We start with an equation resolving or AI based model
- We can go straight from the ocean model to physical evaluation.
- For the hybrid or AI model things we have a few options. 
  - could go directly to physical evaluation but usually better to go through a restart / translator toolbox 
  - this massage the outputs into a compatible format and does some simple checks.
    - We currently only support NEMO. But long term we'd like to extend this. 
  - this ensures we're assessing like for like between the ocean model and the ai emulator
- this is also the glue that prepares us for evaluating the state by plugging it back into the numerical model
:::
